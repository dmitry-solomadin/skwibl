// Generated by CoffeeScript 1.4.0
(function() {

  $(function() {
    var Projects;
    Projects = (function() {

      function Projects() {
        var _this = this;
        this.uid = $("#uid").val();
        $("#showInviteParticipants").on("click", function() {
          return _this.toogleParticipants();
        });
      }

      Projects.prototype.toogleParticipants = function() {
        return $("#inviteParticipants").toggle("slow");
      };

      Projects.prototype.deleteProject = function(pid) {
        if (confirm("Are you sure?")) {
          return $.post('/projects/delete', {
            pid: pid
          }, function(data, status, xhr) {
            return $("#project" + pid).fadeOut();
          });
        }
      };

      Projects.prototype.showInviteModal = function(pid) {
        return $.get("/projects/" + pid + "/participants", function(data) {
          $('#inviteModal').find(".pid").val(pid);
          $('#inviteModal').find("#projectParticipants").html(data);
          return $('#inviteModal').modal('show');
        });
      };

      Projects.prototype.inviteById = function() {
        var pid, uid;
        $("#inviteError").html("");
        uid = $("#inviteIdInput").valc();
        pid = $("#inviteModal").find(".pid").val();
        return $.post('/projects/invite', {
          uid: uid,
          pid: pid
        }, function(data, status, xhr) {
          if (data) {
            $("#inviteError")[0].className = "textSuccess";
            return $("#inviteError").html("Invitation has been sent.");
          } else {
            $("#inviteError")[0].className = "textError";
            return $("#inviteError").html("Unsuccessful");
          }
        });
      };

      Projects.prototype.removeUserFromProject = function(uid) {
        var pid;
        pid = $("#inviteModal").find(".pid").val();
        return $.post('/projects/remove', {
          pid: pid,
          id: uid
        }, function(data, status, xhr) {
          if (data) {
            return $("#participant" + data.uid).fadeOut();
          }
        });
      };

      return Projects;

    })();
    return App.projects = new Projects;
  });

}).call(this);
