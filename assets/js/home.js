// Generated by CoffeeScript 1.4.0
(function() {

  $(function() {
    var home;
    home = {
      showLogin: function() {
        $("#loginBlock").css({
          position: 'absolute',
          top: $("#header").height() + 5,
          left: $("#signInButton").offset().left - $("#loginBlock").width() + 40
        }).fadeIn();
        $(document).on("click.login", function() {
          var target;
          target = event.target;
          if (target.id === "loginBlock" || target.id === "signInButton" || $(target).closest("#loginBlock")[0]) {
            return;
          }
          return $("#loginBlock").fadeOut();
        });
        return false;
      },
      initLogin: function() {
        return $("#loginForm").data("process-submit", function(data) {
          return home.processLogin(data);
        });
      },
      processLogin: function(data) {
        if (data === "OK") {
          return window.location = "/";
        } else {
          return $("#loginError").show().html(data.message);
        }
      }
    };
    home.initLogin();
    return App.Home = home;
  });

}).call(this);
